<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double-Slit Experiment Simulation - Quanim</title>
    <meta name="description"
        content="Interactive double-slit experiment simulation. Explore wave-particle duality and quantum interference patterns.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #fafbfc;
            --bg-secondary: rgba(255, 255, 255, 0.8);
            --bg-tertiary: rgba(255, 255, 255, 0.95);
            --text-primary: #0f172a;
            --text-secondary: #334155;
            --text-muted: #64748b;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --border: rgba(99, 102, 241, 0.2);
            --border-hover: rgba(99, 102, 241, 0.4);
            --shadow: rgba(99, 102, 241, 0.08);
            --shadow-strong: rgba(99, 102, 241, 0.15);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.9);
            --value-color: var(--accent-primary);
            --label-bg: #ffffff;
            --label-border: #e2e8f0;
            --gradient-start: #e0e7ff;
            --gradient-end: #c7d2fe;
        }

        [data-theme="dark"] {
            --bg-primary: #0f0f1a;
            --bg-secondary: rgba(30, 30, 50, 0.8);
            --bg-tertiary: rgba(40, 40, 65, 0.95);
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-primary: #818cf8;
            --accent-secondary: #a78bfa;
            --border: rgba(139, 92, 246, 0.25);
            --border-hover: rgba(139, 92, 246, 0.5);
            --shadow: rgba(139, 92, 246, 0.1);
            --shadow-strong: rgba(139, 92, 246, 0.2);
            --glass-bg: rgba(30, 30, 50, 0.7);
            --glass-border: rgba(60, 60, 100, 0.5);
            --value-color: var(--accent-primary);
            --label-bg: rgba(30, 30, 50, 0.9);
            --label-border: rgba(139, 92, 246, 0.3);
            --gradient-start: #1e1b4b;
            --gradient-end: #312e81;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px;
            color: var(--text-primary);
            transition: all 0.4s ease;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 52px;
            height: 28px;
            border-radius: 14px;
            border: 2px solid var(--border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            cursor: pointer;
            padding: 2px;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .theme-toggle:hover {
            border-color: var(--border-hover);
            transform: scale(1.05);
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            left: 3px;
            top: 3px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 8px var(--shadow-strong);
        }

        [data-theme="dark"] .theme-toggle::before {
            transform: translateX(24px);
        }

        .theme-toggle .icon {
            position: absolute;
            width: 14px;
            height: 14px;
            top: 50%;
            transform: translateY(-50%);
            stroke: var(--text-muted);
            fill: none;
            stroke-width: 1.5;
            transition: opacity 0.3s ease;
        }

        .theme-toggle .icon-sun {
            left: 5px;
            opacity: 1;
        }

        .theme-toggle .icon-moon {
            right: 5px;
            opacity: 0.4;
        }

        [data-theme="dark"] .theme-toggle .icon-sun {
            opacity: 0.4;
        }

        [data-theme="dark"] .theme-toggle .icon-moon {
            opacity: 1;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-muted);
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .back-link:hover {
            color: var(--text-primary);
            border-color: var(--border-hover);
            transform: translateX(-3px);
        }

        .simulation-wrapper {
            display: flex;
            flex-direction: row;
            gap: 24px;
            width: 100%;
            padding-left: 10%;
            /* Left padding only */
            padding-right: 20px;
            /* Minimal right padding */
            height: calc(100vh - 120px);
            /* Fit screen minus header */
            box-sizing: border-box;
            align-items: flex-start;
        }

        #canvas-container {
            flex-grow: 1;
            height: 100%;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 80px var(--shadow-strong), 0 0 0 1px var(--border);
            background: var(--bg-primary);
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 20%;
            /* Takes up the 20% area */
            min-width: 260px;
            flex-shrink: 0;
            overflow-y: auto;
            max-height: 100%;
            padding-right: 4px;
            /* Space for scrollbar */
        }

        /* Scrollbar for controls */
        .controls::-webkit-scrollbar {
            width: 6px;
        }

        .controls::-webkit-scrollbar-track {
            background: transparent;
        }

        .controls::-webkit-scrollbar-thumb {
            background-color: var(--border);
            border-radius: 3px;
        }

        /* Adjust header to take up less space */
        .header {
            text-align: center;
            margin-bottom: 20px;
            margin-top: 20px;
        }

        @media (max-width: 900px) {
            .simulation-wrapper {
                flex-direction: column;
                height: auto;
                padding: 0 5%;
            }

            .controls {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                max-height: none;
                overflow-y: visible;
            }

            #canvas-container {
                height: 500px;
                /* Fallback for mobile */
                width: 100%;
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 18px 24px;
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px var(--shadow);
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .control-group:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 48px var(--shadow-strong);
            border-color: var(--border-hover);
        }

        .control-group label {
            font-weight: 500;
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .control-group input[type="range"] {
            width: 120px;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--border);
            border-radius: 3px;
            outline: none;
            border: none;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .control-group input[type="range"]:hover {
            background: var(--border-hover);
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            cursor: pointer;
            box-shadow: 0 2px 10px var(--shadow-strong);
            transition: all 0.2s ease;
            margin-top: -7px;
        }

        .control-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
        }

        .control-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 10px var(--shadow-strong);
        }

        .value-display {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--value-color);
        }

        .action-btn {
            padding: 12px 24px;
            font-size: 0.9rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow-strong);
            border-color: var(--border-hover);
        }

        .action-btn.active {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.3);
        }

        .action-btn.active:hover {
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4);
        }

        .observer-control {
            min-width: auto;
        }

        .info-panel {
            margin-top: 32px;
            max-width: 900px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 12px 40px var(--shadow);
            overflow: hidden;
        }

        .info-header {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            padding: 20px 28px;
            color: white;
        }

        .info-header h2 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .info-header p {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .info-content {
            padding: 28px;
        }

        .info-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            margin-top: 20px;
        }

        .info-content h3:first-child {
            margin-top: 0;
        }

        .info-content p {
            font-size: 0.925rem;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .info-content strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .info-content .highlight {
            color: var(--accent-primary);
            font-weight: 600;
        }

        .legend {
            display: flex;
            gap: 24px;
            justify-content: center;
            padding: 20px 28px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.wave {
            background: var(--text-primary);
        }

        .legend-dot.constructive {
            background: #22c55e;
        }

        .legend-dot.destructive {
            background: #6b7280;
        }

        /* Equation box */
        .equation-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 20px;
            text-align: center;
            margin: 16px 0;
            font-family: 'Times New Roman', serif;
        }

        .equation-box .equation {
            font-size: 1.2rem;
            color: var(--text-primary);
        }

        .equation-box .description {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 8px;
            font-family: 'Inter', sans-serif;
        }

        /* Responsive Design */
        @media screen and (max-width: 1024px) {
            #canvas-container {
                width: 100%;
                max-width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            #canvas-container canvas {
                width: 100%;
                height: auto;
            }
        }

        @media screen and (max-width: 768px) {
            body {
                padding: 16px;
            }

            .header {
                margin-top: 50px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .controls {
                gap: 12px;
                padding: 0 8px;
            }

            .control-group {
                flex: 1 1 calc(50% - 12px);
                min-width: 130px;
                padding: 14px 16px;
            }

            .control-group input[type="range"] {
                width: 100%;
            }

            .info-panel {
                margin: 24px 8px;
            }

            .legend {
                flex-wrap: wrap;
                gap: 16px;
            }
        }

        @media screen and (max-width: 480px) {
            .back-link {
                padding: 8px 14px;
                font-size: 0.8rem;
            }

            .theme-toggle {
                top: 16px;
                right: 16px;
            }

            h1 {
                font-size: 1.25rem;
            }

            .control-group {
                flex: 1 1 100%;
            }
        }
    </style>
</head>

<body>
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
        <svg class="icon icon-sun" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="4" />
            <path
                d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
        </svg>
        <svg class="icon icon-moon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
    </button>

    <a href="index.html" class="back-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Back to Home
    </a>

    <div class="header">
        <h1>üåä Double-Slit Experiment</h1>
        <p class="subtitle">Wave interference & quantum mechanics visualization</p>
    </div>

    <div class="simulation-wrapper">
        <div id="canvas-container">
            <!-- p5.js canvas will be inserted here -->
        </div>

        <div class="controls">
            <div class="control-group">
                <label>Wavelength</label>
                <div class="value-display"><span id="wavelengthValue">550</span> nm</div>
                <input type="range" id="wavelengthSlider" min="380" max="780" value="550">
            </div>

            <div class="control-group">
                <label>Slit Separation</label>
                <div class="value-display"><span id="slitSepValue">100</span></div>
                <input type="range" id="slitSepSlider" min="50" max="250" value="100">
            </div>

            <div class="control-group">
                <label>Wave Speed</label>
                <div class="value-display"><span id="speedValue">2</span>x</div>
                <input type="range" id="speedSlider" min="1" max="5" value="2" step="0.5">
            </div>

            <div class="control-group">
                <label>Slit Width</label>
                <div class="value-display"><span id="slitWidthValue">20</span></div>
                <input type="range" id="slitWidthSlider" min="5" max="50" value="20">
            </div>

            <div class="control-group observer-control">
                <label>Measurement</label>
                <button id="observerBtn" class="action-btn">
                    üëÅ Observer OFF
                </button>
            </div>
        </div>
    </div>

    <div class="info-panel">
        <div class="info-header">
            <h2>Understanding the Double-Slit Experiment</h2>
            <p>The most beautiful experiment in physics ‚Äî Richard Feynman</p>
        </div>

        <div class="info-content">
            <h3>üî¨ Historical Significance</h3>
            <p>
                First performed by <strong>Thomas Young in 1801</strong>, this groundbreaking experiment provided
                definitive evidence that light behaves as a wave. Over a century later, it became central to the
                development of quantum mechanics when scientists discovered that individual particles ‚Äî electrons,
                photons, even atoms ‚Äî produce the same interference pattern, suggesting they behave as <span
                    class="highlight">both
                    waves and particles</span>.
            </p>

            <h3>üåä What You're Seeing</h3>
            <p>
                Waves emanate from a source and pass through two narrow slits. Each slit acts as a new wave source
                (Huygens' principle). Where the waves meet, they <strong>interfere</strong>: when wave peaks align,
                they reinforce each other (<span class="highlight">constructive interference</span>); when peaks
                meet troughs, they cancel out (<span class="highlight">destructive interference</span>).
            </p>

            <div class="equation-box">
                <div class="equation">d sin(Œ∏) = nŒª</div>
                <div class="description">Condition for constructive interference (bright bands)</div>
            </div>

            <h3>ü§Ø The Quantum Mystery</h3>
            <p>
                The truly mind-bending discovery came when scientists fired particles <em>one at a time</em> through
                the slits. Amazingly, the interference pattern still emerged over time ‚Äî as if each particle
                <strong>interfered with itself</strong>! This is only possible if each particle passes through
                <em>both slits simultaneously</em> as a quantum wave, collapsing to a definite position only when
                measured at the screen.
            </p>

            <p>
                Even more bizarre: if you try to detect which slit the particle passes through, the interference
                pattern disappears! This is the famous <span class="highlight">"observer effect"</span> ‚Äî measurement
                fundamentally changes quantum behavior.
            </p>
        </div>

        <div class="legend">
            <div class="legend-item"><span class="legend-dot wave"></span> Wave fronts</div>
            <div class="legend-item"><span class="legend-dot constructive"></span> Constructive interference</div>
            <div class="legend-item"><span class="legend-dot destructive"></span> Destructive interference</div>
        </div>
    </div>

    <script src="double-slit.js"></script>
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        // Check for saved theme preference or default to light
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            html.setAttribute('data-theme', 'dark');
        }

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            if (currentTheme === 'dark') {
                html.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                // Update p5.js colors
                if (typeof updateColors === 'function') updateColors('light');
            } else {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                // Update p5.js colors
                if (typeof updateColors === 'function') updateColors('dark');
            }
        });
    </script>
</body>

</html>